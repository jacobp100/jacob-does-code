<!DOCTYPE html><html lang="en"><head><title>A Primer in ReasonML</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="icon" href="/res/19f82827.png" sizes="16x16" type="image/png"/><link rel="icon" href="/res/eb210940.png" sizes="32x32" type="image/png"/><link rel="apple-touch-icon" href="/res/346f150e.png"/><link rel="apple-touch-icon" sizes="57x57" href="/res/96dcd9a9.png"/><link rel="apple-touch-icon" sizes="72x72" href="/res/cf5ba76d.png"/><link rel="apple-touch-icon" sizes="76x76" href="/res/4ba903c3.png"/><link rel="apple-touch-icon" sizes="114x114" href="/res/a58fed4c.png"/><link rel="apple-touch-icon" sizes="120x120" href="/res/a5e39fa5.png"/><link rel="apple-touch-icon" sizes="152x152" href="/res/ca89aad4.png"/><link rel="apple-touch-icon" sizes="167x167" href="/res/5d37ba5a.png"/><link rel="apple-touch-icon" sizes="180x180" href="/res/f0517911.png"/><script>document.documentElement.style.setProperty("--d",1/(window.devicePixelRatio||1)+"px");</script><style>@font-face{font-family:Inter;font-weight:100 900;font-display:swap;font-style:normal;font-named-instance:"Regular";src:url(/res/541fae2e.woff2);font-display:fallback}@font-face{font-family:Inter;font-weight:100 900;font-display:swap;font-style:italic;font-named-instance:"Regular";src:url(/res/1517082.woff2);font-display:fallback}*,::after,::before{box-sizing:border-box}*{font-size:calc(var(--e)*var(--i));line-height:calc(var(--f)*var(--i));letter-spacing:calc(var(--g)*var(--i));font-weight:var(--h);--i:calc(
    (var(--j) * 1rem / 16) +
      ((1 - var(--j)) * 1px)
  )}@supports (font-variation-settings:"wght"400){*{font-weight:inherit;font-variation-settings:"wght"var(--h)}}:root{--k:#f97f51;--l:#fc427b;--m:#2874ff;--a:#ffc312;--b:var(--n);--o:var(--n);--c:var(--n);--n:black;--p:white;--q:12px;--r:12px;--j:1}::selection{background:var(--c);color:#fff}body{margin:var(--q) var(--r) 64px;--e:18;font-family:Inter,system-ui,-apple-system,sans-serif;color:var(--n);background:var(--p);--f:26}a{color:var(--c);text-decoration:none}a:active,a:focus,a:hover{text-decoration:underline}.a{display:flex;padding-top:12px;margin:-12px calc(-1*var(--r)) 48px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch}.a::after,.a::before{display:block;content:"";padding-right:var(--r)}.b,.d{flex:none;--h:700}.d{display:block;--e:24;--f:18;--g:-1;text-transform:lowercase;border-top:4px solid;padding:6px 4px 0 0}a.d{color:currentColor;text-decoration:none}.b{margin:0 0 0 24px;--e:6;--f:10;--g:1;--j:0;text-transform:uppercase;width:0;overflow-wrap:normal}.c{margin-left:auto}.e{flex:none;display:block;margin:10px 24px 0 0;--e:14;--f:18;--h:400}.e:last-child{margin-right:0}@media (prefers-color-scheme:dark){:root{--n:white;--p:black}}@media (min-width:768px){:root{--r:64px}}@media (min-width:1024px){:root{--r:128px}}*{overflow-wrap:break-word}:root{--r:max(12px, (100vw - var(--s)) / 2);--s:800px;--c:var(--o)}h1{margin:48px 0 32px;--e:36;--f:48;--g:-0.8}h2,h3{margin:42px 0 18px}h1,h2{font-weight:700}h2{--e:26;--f:34;--g:-0.3}h3{--e:22;--f:30;--g:-0.18}p{margin:18px 0}h3,strong{font-weight:600}ol,ul{margin:24px 0;padding-left:32px;margin-left:calc(-32*min(max(var(--r) - 32px,0px),1px))}li{position:relative;margin:2px 0;list-style:none}li::before{position:absolute;content:var(--t, "ðŸ‘‰");right:calc(100% + 12px)}li[data-bullet]{--t:attr(data-bullet)}blockquote{margin:32px 24px 32px 48px;--e:22;--f:32;font-weight:300;font-style:italic}table{margin:24px;border-collapse:separate;border-spacing:12px 0}thead th{border-bottom:var(--d) solid;--h:600;text-align:left}code,hr{background-color:#f4f4f4}hr{margin:32px calc(-1*var(--r));height:var(--d);border:0}code{font-size:.9em;font-family:monospace;padding:0 3px;border:1px solid #eee;border-radius:6px}pre code{display:block;width:100vw;margin:48px calc(-1*var(--r));padding:18px var(--r);background-color:#fafafa;border:1px solid #f4f4f4;border-width:1px 0;border-radius:0;overflow-x:scroll}video{display:block;max-width:100%;margin:32px auto}iframe{width:calc(var(--u)*1);height:calc(var(--u)*.66);border:1px solid rgba(0,0,0,.1);--u:calc(100vw - 2 * var(--r))}.f,blockquote{color:#9e9e9e}@media (min-width:768px){a,p>code{word-break:initial}}@media (prefers-color-scheme:dark){hr,pre code{background-color:#080808}code{background-color:#111;border-color:#222}pre code{border-color:#111}}.-m,.-o{color:#a0a1a7;font-style:italic}.-d,.-p,.-q{color:#a626a4}.-r,.-s,.-t,.-u,.-v{color:#e45649}.-k{color:#0184bb}.-A,.-w,.-x,.-y,.-z{color:#50a14f}.-B .-C,.-n{color:#c18401}.-D,.-E,.-F,.-G,.-H,.-I,.-J,.-j{color:#986801}.-C,.-K,.-L,.-M,.-N,.-O{color:#4078f2}.-P{font-style:italic}.-Q{font-weight:700}.-M{text-decoration:underline}@media (prefers-color-scheme:dark){.-m,.-o{color:#5c6370;font-style:italic}.-d,.-p,.-q{color:#c678dd}.-r,.-s,.-t,.-u,.-v{color:#e06c75}.-k{color:#56b6c2}.-A,.-w,.-x,.-y,.-z{color:#98c379}.-B .-C,.-n{color:#e6c07b}.-D,.-E,.-F,.-G,.-H,.-I,.-J,.-j{color:#d19a66}.-C,.-K,.-L,.-M,.-N,.-O{color:#61aeee}.-P{font-style:italic}.-Q{font-weight:700}.-M{text-decoration:underline}}</style></head><body><div class="a"><a href="/" class="d">Jacob<br/>does<br/>code</a><div class="b">Apps</div><a href="/pocket-jam" class="e">Pocket Jam</a><a href="/piano-tabs" class="e">Piano Tabs</a><a href="/technicalc" class="e">TechniCalc</a><a href="/calipers" class="e">Calipers</a><a href="/freebies" class="e">Freebies</a><div class="b c">Developement</div><a href="/blog" class="e">Blog</a><a href="https://github.com/jacobp100" class="e">Github</a></div><h1>A Primer in ReasonML</h1>
<p>If youâ€™ve used Reason a little bit, you might have seen <code>string_of_int</code>, <code>string_of_float</code>, or if youâ€™re using Belt, <code>Float.toString</code>.</p>
<p>So the question is â€” why is this necessary? A lot of languages let you do <code>toString</code> without saying the type youâ€™re converting from.</p>
<p>A lot of languages support something called function overloading. Take C# for example,</p>
<pre><code><span class="-e"><span class="-n">string</span> <span class="-C">ToString</span>(<span class="-f"><span class="-n">int</span> x</span>)</span> { <span class="-m">/*...*/</span> }
<span class="-e"><span class="-n">string</span> <span class="-C">ToString</span>(<span class="-f"><span class="-n">float</span> x</span>)</span> { <span class="-m">/*...*/</span> }
</code></pre>
<p>In JavaScript, you can get something to the same effect by using <code>typeof</code> checks.</p>
<p>Most languages, too, support essentially the same thing through object inheritance too. You can have a class <code>Pet</code> with a <code>toString</code> method on it, then make subclasses <code>Dog</code> and <code>Cat</code> which each have their own <code>toString</code> methods.</p>
<p>Reason doesnâ€™t support the first kind of overloading. Functions can only be defined once, and you canâ€™t do <code>typeof</code> checks on what is passed in.</p>
<p>Reason does technically have some concept of classes, but they are rarely used. Itâ€™s best to just not use them.
Itâ€™s because of these reasons there are multiple kinds of <code>+</code> operator â€” including <code>+.</code> for floats, <code>++</code> for strings.</p>
<p>This might initially seem like a significant limitation, but the omission of these features is intentional: these features always have edge cases in any language that includes them.</p>
<h2>Modules</h2>
<p>The most unique part of Reason is its module system. They are much more powerful than classes â€” both for the user, the type checker and the compiler.</p>
<p>Usually, you will make your modules as isolated as possible, and group all the functionality in the module â€” not far off what your average class looks like.</p>
<p>The convention is to have a type <code>t</code> that encompasses all the data a class would have. You also normally have a <code>make</code> function to act as a constructor and/or an <code>empty</code> variable if that makes sense for your module. For example,</p>
<pre><code><span class="-d">module</span> Person = {
  <span class="-d">type</span> t = {name: <span class="-n">string</span>};

  <span class="-d">let</span> make =<span class="-e"> <span class="-f">name</span> =&gt;</span> {name: name};

  <span class="-d">let</span> toString =<span class="-e"> <span class="-f">person</span> =&gt;</span> <span class="-w">&quot;Person :&quot;</span><span class="-i"> ++ </span>person.name;
};

<span class="-d">let</span> person = <span class="-R"><span class="-S"><span class="-l">Person</span>.</span></span>make(<span class="-w">&quot;Bob&quot;</span>);
<span class="-d">let</span> personString = <span class="-R"><span class="-S"><span class="-l">Person</span>.</span></span><span class="-d">to</span><span class="-h">String(<span class="-f">person</span>)</span>;
<span class="-R"><span class="-S"><span class="-l">Js</span>.</span></span>log(personString);

<span class="-m">/* Or */</span>
<span class="-d">let</span> personString = <span class="-R"><span class="-S"><span class="-l">Person</span>.</span>(make(&quot;Bob&quot;)-&gt;toString)</span>;
</code></pre>
<p>I said before this isnâ€™t too far from what an average class looks like. But there is one crucial difference.</p>
<p>In OOP, your data and your functions are forcibly coupled together. Here, however, the grouping is just for the programmer â€” there is nothing actually forcing the type and the two functions together.</p>
<p>OOP tends to suffer from data not being strictly hierarchical. By not coupling the data and functions means that when your data isnâ€™t hierarchical, you have much better tools to organise your code â€” although thatâ€™s another blog post.</p>
<h2>Bonus Time</h2>
<p>As a last bonus, something youâ€™ll see in Belt is defining operators in a module â€” and this is something you can do too!</p>
<pre><code><span class="-d">module</span> Fraction = {
  <span class="-d">type</span> t = {
    num: <span class="-n">int</span>,
    den: <span class="-n">int</span>,
  };

  <span class="-d">let</span> make =<span class="-e"> (<span class="-f">num</span>, <span class="-f">den</span>) =&gt;</span> {num, den};

  <span class="-d">let</span><span class="-e"> (+) = (<span class="-f">a</span>, <span class="-f">b</span>) =&gt;</span> {
    num: a.num<span class="-i"> * </span>b.den + a.den<span class="-i"> * </span>b.num,
    den: a.den<span class="-i"> * </span>b.den,
  };
};

<span class="-d">let</span> fractionSum = <span class="-R"><span class="-S"><span class="-l">Fraction</span>.</span>(make(1, 2) + make(1, 3))</span>;
<span class="-R"><span class="-S"><span class="-l">Js</span>.</span></span>log(fractionSum);
</code></pre>
<p>This is a bit like marmite â€” some people love it, some hate it. It really depends on your project how much youâ€™ll make use of it â€” if at all.</p><span class="f">Published on <time dateTime="2020-04-08T00:00:00.000Z">8th April 2020</time></span></body></html>