<!DOCTYPE html><html lang="en"><head><title>Dark Mode in React Native</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="icon" href="/res/19f82827.png" sizes="16x16" type="image/png"/><link rel="icon" href="/res/eb210940.png" sizes="32x32" type="image/png"/><link rel="apple-touch-icon" href="/res/346f150e.png"/><link rel="apple-touch-icon" sizes="57x57" href="/res/96dcd9a9.png"/><link rel="apple-touch-icon" sizes="72x72" href="/res/cf5ba76d.png"/><link rel="apple-touch-icon" sizes="76x76" href="/res/4ba903c3.png"/><link rel="apple-touch-icon" sizes="114x114" href="/res/a58fed4c.png"/><link rel="apple-touch-icon" sizes="120x120" href="/res/a5e39fa5.png"/><link rel="apple-touch-icon" sizes="152x152" href="/res/ca89aad4.png"/><link rel="apple-touch-icon" sizes="167x167" href="/res/5d37ba5a.png"/><link rel="apple-touch-icon" sizes="180x180" href="/res/f0517911.png"/><script>document.documentElement.style.setProperty("--d",1/(window.devicePixelRatio||1)+"px");</script><style>@font-face{font-family:Inter;font-weight:100 900;font-display:swap;font-style:normal;font-named-instance:"Regular";src:url(/res/541fae2e.woff2);font-display:fallback}@font-face{font-family:Inter;font-weight:100 900;font-display:swap;font-style:italic;font-named-instance:"Regular";src:url(/res/1517082.woff2);font-display:fallback}*,::after,::before{box-sizing:border-box}*{font-size:calc(var(--e)*var(--i));line-height:calc(var(--f)*var(--i));letter-spacing:calc(var(--g)*var(--i));font-weight:var(--h);--i:calc(
    (var(--j) * 1rem / 16) +
      ((1 - var(--j)) * 1px)
  )}@supports (font-variation-settings:"wght"400){*{font-weight:inherit;font-variation-settings:"wght"var(--h)}}:root{--k:#f97f51;--l:#fc427b;--m:#0652dd;--n:#2771f9;--o:var(--m);--a:#ffc312;--b:#5f27cd;--p:#341f97;--c:var(--q);--q:black;--r:white;--s:12px;--t:12px;--j:1}::selection{background:var(--c);color:#fff}body{margin:var(--s) var(--t) 64px;--e:18;font-family:Inter,system-ui,-apple-system,sans-serif;color:var(--q);background:var(--r);--f:26}a{color:var(--c);text-decoration:none}a:active,a:focus,a:hover{text-decoration:underline}.a{display:flex;padding-top:12px;margin:-12px calc(-1*var(--t)) 48px;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch}.a::after,.a::before{display:block;content:"";padding-right:var(--t)}.b,.d{flex:none;--h:700}.d{display:block;--e:24;--f:18;--g:-1;text-transform:lowercase;border-top:4px solid;padding:6px 4px 0 0}a.d{color:currentColor;text-decoration:none}.b{margin:0 0 0 24px;--e:6;--f:10;--g:1;--j:0;text-transform:uppercase;width:0;overflow-wrap:normal}.c{margin-left:auto}.e{flex:none;display:block;margin:10px 24px 0 0;--e:14;--f:18;--h:400}.e:last-child{margin-right:0}@media (prefers-color-scheme:dark){:root{--o:var(--n);--q:white;--r:black}}@media (min-width:768px){:root{--t:64px}}@media (min-width:1024px){:root{--t:128px}}*{overflow-wrap:break-word}:root{--t:max(12px, (100vw - var(--u)) / 2);--u:800px;--c:var(--p)}h1{margin:48px 0 32px;--e:36;--f:48;--g:-0.8}h2,h3{margin:42px 0 18px}h1,h2{font-weight:700}h2{--e:26;--f:34;--g:-0.3}h3{--e:22;--f:30;--g:-0.18}p{margin:18px 0}h3,strong{font-weight:600}ol,ul{margin:24px 0;padding-left:32px;margin-left:calc(-32*min(max(var(--t) - 32px,0px),1px))}li{position:relative;margin:2px 0;list-style:none}li::before{position:absolute;content:var(--v, "ðŸ‘‰");right:calc(100% + 12px)}li[data-bullet]{--v:attr(data-bullet)}blockquote{margin:32px 24px 32px 48px;--e:22;--f:32;font-weight:300;font-style:italic}table{margin:24px;border-collapse:separate;border-spacing:12px 0}thead th{border-bottom:var(--d) solid;--h:600;text-align:left}code,hr{background-color:#f4f4f4}hr{margin:32px calc(-1*var(--t));height:var(--d);border:0}code{font-size:.9em;font-family:monospace;padding:0 3px;border:1px solid #eee;border-radius:6px}pre code{display:block;width:100vw;margin:48px calc(-1*var(--t));padding:18px var(--t);background-color:#fafafa;border:1px solid #f4f4f4;border-width:1px 0;border-radius:0;overflow-x:scroll}video{display:block;max-width:100%;margin:32px auto}iframe{width:calc(var(--w)*1);height:calc(var(--w)*.66);border:1px solid rgba(0,0,0,.1);--w:calc(100vw - 2 * var(--t))}.f,blockquote{color:#9e9e9e}@media (min-width:768px){a,p>code{word-break:initial}}@media (prefers-color-scheme:dark){hr,pre code{background-color:#080808}code{background-color:#111;border-color:#222}pre code{border-color:#111}}.-k,.-m{color:#a0a1a7;font-style:italic}.-b,.-n,.-o{color:#a626a4}.-p,.-q,.-r,.-s,.-t{color:#e45649}.-i{color:#0184bb}.-u,.-v,.-w,.-x,.-y{color:#50a14f}.-l,.-z .-A{color:#c18401}.-B,.-C,.-D,.-E,.-F,.-G,.-H,.-h{color:#986801}.-A,.-I,.-J,.-K,.-L,.-M{color:#4078f2}.-N{font-style:italic}.-O{font-weight:700}.-K{text-decoration:underline}@media (prefers-color-scheme:dark){.-k,.-m{color:#5c6370;font-style:italic}.-b,.-n,.-o{color:#c678dd}.-p,.-q,.-r,.-s,.-t{color:#e06c75}.-i{color:#56b6c2}.-u,.-v,.-w,.-x,.-y{color:#98c379}.-l,.-z .-A{color:#e6c07b}.-B,.-C,.-D,.-E,.-F,.-G,.-H,.-h{color:#d19a66}.-A,.-I,.-J,.-K,.-L,.-M{color:#61aeee}.-N{font-style:italic}.-O{font-weight:700}.-K{text-decoration:underline}}</style></head><body><div class="a"><a href="/" class="d">Jacob<br/>does<br/>code</a><div class="b">Apps</div><a href="/pocket-jam" class="e">Pocket Jam</a><a href="/piano-tabs" class="e">Piano Tabs</a><a href="/technicalc" class="e">TechniCalc</a><a href="/calipers" class="e">Calipers</a><a href="/freebies" class="e">Freebies</a><div class="b c">Developement</div><a href="/blog" class="e">Blog</a><a href="https://github.com/jacobp100" class="e">Github</a></div><h1>Dark Mode in React Native</h1>
<p>Half way through 2019, both Android and iOS announced they would be getting dark mode in their next major updates â€” and in September of that year, those updates were released. Youâ€™ll need to be on at least iOS 13, or Android 10 â€” although some Android 9 phones seem to support dark mode anyway.</p>
<p>From the design perspective, it is a much more complicated than just making the text white and the background black. To complicate it further, the individual platform guidelines for dark mode differ. For example, iOS will slightly tweak accent colours very slightly in dark mode, where Android will recommend using different accent colours, and using them in different places too. iOS also has a set of elevated colours that are different to the base colours in dark mode, and identical to the base colours in light mode. However, you donâ€™t have to follow the guidelines to the letter â€” especially if your app is heavily branded. They are worth a read for ideas nevertheless.</p>
<ul>
<li><a href="https://developer.apple.com/design/human-interface-guidelines/ios/visual-design/dark-mode/">Apple dark mode guidelines</a></li>
<li><a href="https://material.io/design/color/dark-theme.html#states">Android dark mode guidelines</a></li>
<li><a href="https://uxdesign.cc/turn-the-lights-off-designing-the-dark-mode-of-wego-ios-app-6c4967e59dd6">Not guidelines but in fact a very handy blog post</a></li>
</ul>
<p>But Iâ€™m not here to tell you how to design for dark mode â€” Iâ€™m here to tell you how to implement it in React Native.</p>
<blockquote>
<p>First, you need to be using at least React Native 0.62.</p>
</blockquote>
<h2>useColorScheme()</h2>
<p>This is a hook thatâ€™ll give you the string <code>&quot;light&quot;</code> or <code>&quot;dark&quot;</code>.</p>
<p>Because itâ€™s a hook, it doesnâ€™t work inside <code>StyleSheet.create</code>, so youâ€™ll likely need to define duplicates of styles for light/dark mode, or add the colours inline in the style prop.</p>
<pre><code><span class="-b">import</span> { useColorScheme } <span class="-b">from</span> <span class="-u">&quot;react-native&quot;</span>;

<span class="-b">const</span> styles = <span class="-A -R">StyleSheet</span>.<span class="-A -S">create</span>({
  <span class="-B">titleLight</span>: {
    <span class="-B">color</span>: <span class="-u">&quot;black&quot;</span>,
  },
  <span class="-B">titleDark</span>: {
    <span class="-B">color</span>: <span class="-u">&quot;white&quot;</span>,
  },
});

<span class="-b">const</span> <span class="-A -S">Example</span> = (<span class="-d"></span>) =&gt; {
  <span class="-b">const</span> colorScheme = <span class="-A -S">useColorScheme</span>();
  <span class="-b">const</span> isDark = colorScheme === <span class="-u">&quot;dark&quot;</span>;

  <span class="-b">return</span> (
    <span class="-T"><span class="-U">&lt;<span class="-q">Text</span> <span class="-B">style</span>=<span class="-u">{isDark</span> ? <span class="-B">styles.titleDark</span> <span class="-B">:</span> <span class="-B">styles.titleLight</span>}&gt;</span>
      Some text...
    <span class="-U">&lt;/<span class="-q">Text</span>&gt;</span></span>
  );
};
</code></pre>
<p>It might be tempting to make abstractions to make this a bit more palatable, but hold back! This situation is going to get better.</p>
<h2>PlatformColor and DynamicColorIOS</h2>
<p>Not only has Microsoft been busy at work getting React Native to work on <a href="https://microsoft.github.io/react-native-windows/">Windows</a> and <a href="https://github.com/microsoft/react-native-macos">macOS</a>, theyâ€™ve also been busy at work making React Native better for Android and iOS. A few months ago they opened an extensive PR to add dynamic colours directly into React Native itself to make dark mode more ergonomic to support.</p>
<blockquote>
<p>Starting in React Native 0.63, youâ€™ll be able to define dynamic colours directly in a StyleSheet body</p>
</blockquote>
<p>Note â€” I donâ€™t work for Microsoft or anything, itâ€™s just incredible to see the positive impact theyâ€™re having.</p>
<p><code>DynamicColorIOS</code> is the easiest to explain â€” and use. It takes an object with keys <code>light</code> and <code>dark</code>, and values of the regular colour strings youâ€™re already used to.</p>
<pre><code><span class="-b">import</span> { <span class="-A -R">DynamicColorIOS</span> } <span class="-b">from</span> <span class="-u">&quot;react-native&quot;</span>;

<span class="-b">const</span> styles = <span class="-A -R">StyleSheet</span>.<span class="-A -S">create</span>({
  <span class="-B">title</span>: {
    <span class="-B">color</span>: <span class="-A -R">DynamicColorIOS</span>({
      <span class="-B">light</span>: <span class="-u">&quot;black&quot;</span>,
      <span class="-B">dark</span>: <span class="-u">&quot;white&quot;</span>,
    }),
  },
});

<span class="-b">const</span> <span class="-A -S">Example</span> = (<span class="-d"></span>) =&gt; {
  <span class="-k">// Look mum, no hooks!</span>
  <span class="-b">return</span> <span class="-T"><span class="-U">&lt;<span class="-q">Text</span> <span class="-B">style</span>=<span class="-u">{styles.title}</span>&gt;</span>Some text...<span class="-U">&lt;/<span class="-q">Text</span>&gt;</span></span>;
};
</code></pre>
<p>If you didnâ€™t guess from the name, this function only works on iOS. On Android, itâ€™ll actually crash â€” youâ€™ll need to make sure you donâ€™t call this function on there.</p>
<p>Next up is <code>PlatformColor</code>, which takes a string of a platform colour. On iOS, the platform colours are anything in <a href="https://noahgilmore.com/blog/dark-mode-uicolor-compatibility/">this list</a> â€” scroll down to the tables at the bottom.</p>
<p>On Android, there technically is the ability to reference system colours, but they tend to be a bit of a mess and not too useful. However, <strong>you can define your own platform colours on Android</strong>.</p>
<p>First, copy the example below into <code>android/app/src/main/res/values/colors.xml</code>. You can add as many colours as you want, and you donâ€™t need to keep the ones I added. All values must be 6 or 8 digit hex values (8 digits for adding opacity).</p>
<pre><code><span class="-L">&lt;?xml version=<span class="-u">&quot;1.0&quot;</span> encoding=<span class="-u">&quot;utf-8&quot;</span>?&gt;</span>
<span class="-U">&lt;<span class="-q">resources</span>&gt;</span>
  <span class="-U">&lt;<span class="-q">color</span> <span class="-B">name</span>=<span class="-u">&quot;background&quot;</span>&gt;</span>#FFFFFF<span class="-U">&lt;/<span class="-q">color</span>&gt;</span>
  <span class="-U">&lt;<span class="-q">color</span> <span class="-B">name</span>=<span class="-u">&quot;color&quot;</span>&gt;</span>#212121<span class="-U">&lt;/<span class="-q">color</span>&gt;</span>
<span class="-U">&lt;/<span class="-q">resources</span>&gt;</span>
</code></pre>
<p>Next, make the copy the file into <code>android/app/src/main/res/values-night/colors.xml</code> â€” note the folder is now <code>values-night</code>. In this file, you keep the same names, but you change the hex values the values to your dark mode theme.</p>
<p>Now when you want to use them, you can use <code>PlatformColor</code> with the string <code>@color/</code>followed by the name of the colour you defined in your xml. For example, <code>PlatformColor(&quot;@color/background&quot;)</code>.</p>
<p>This will give you the same as <code>DynamicColorIOS</code>. Youâ€™ll need to rebuild the app whenever you change the xml files.</p>
<h2>Ironing out Platform Differences</h2>
<p>In most projects I work on, I have a style guide file that has all the brand colours, but for the one-off colours that are only used for a single component, I usually prefer to just put them in the file theyâ€™re used. It makes it less likely youâ€™ll have unused colours lying around as your app progresses.</p>
<p>However, here I would recommend putting every single colour in a single file. This is because this file will need to be in sync with your xml files.</p>
<pre><code><span class="-b">import</span> {
  <span class="-A -R">PlatformColor</span>,
  <span class="-A -R">DynamicColorIOS</span> <span class="-b">as</span> <span class="-A -R">BaseDynamicColorIOS</span>,
  <span class="-A -R">Platform</span>,
} <span class="-b">from</span> <span class="-u">&quot;react-native&quot;</span>;

<span class="-k">// Stops this crashing when called on other platforms</span>
<span class="-b">const</span> <span class="-A -R">DynamicColorIOS</span> = <span class="-A -R">Platform</span>.<span class="-A -S">select</span>({
  <span class="-B">ios</span>: <span class="-A -R">BaseDynamicColorIOS</span>,
  <span class="-B">default</span>: <span class="-c">() =&gt;</span> <span class="-i">null</span>,
});

<span class="-b">export</span> <span class="-b">const</span> backgroundColor = <span class="-A -R">Platform</span>.<span class="-A -S">select</span>({
  <span class="-B">ios</span>: <span class="-A -R">DynamicColorIOS</span>({ <span class="-B">light</span>: <span class="-u">&quot;white&quot;</span>, <span class="-B">dark</span>: <span class="-u">&quot;black&quot;</span> }),
  <span class="-B">android</span>: <span class="-A -R">PlatformColor</span>(<span class="-u">&quot;@color/background&quot;</span>),
});
<span class="-b">export</span> <span class="-b">const</span> textColor = <span class="-A -R">Platform</span>.<span class="-A -S">select</span>(etc);
</code></pre>
<p>Now when youâ€™re making changes, you only need to look in this file, and the xml files in the <code>android</code> folder.</p>
<h2>Just a Note</h2>
<p>When you can, you should always use the new way of colours over the hooks. Theyâ€™re much more performant, and youâ€™ll get nice animations on iOS when the theme changes.</p>
<p>However, it looks like on Android, you canâ€™t use these colours for border colours. You also donâ€™t seem to be able to use them in React Native SVG for the time being too. Youâ€™ll probably experience a few snags over the next few weeks before they get ironed out.</p><span class="f">Published on <time dateTime="2020-05-30T00:00:00.000Z">30th May 2020</time></span></body></html>